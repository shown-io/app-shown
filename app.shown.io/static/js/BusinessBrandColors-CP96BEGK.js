import{H as w,o as g,w as G,s as i,bQ as K,bE as v,bR as Q,ab as V,aB as S,Q as W,_ as L,bS as Y,bT as M,r as Z,bz as J,bU as X,ag as ee}from"./vendor-CqSKez46.js";import{bS as te,s as h,B as N,bT as ae,bU as se,bV as x,bW as I,aa as oe,u as ie,aR as $,bX as re,bY as ne,o as m,t as ce,S as P,T,F as de,aN as le,p as ue,x as pe}from"./index-VnkSLCvX.js";import{d as me}from"./Hooks-CnpTTde6.js";import{a as ge}from"./DeleteConfirmationModal-ChnozjQ0.js";const fe=w.createContext({pages:new Map,form:null,actions:{reload:te},handleNext:()=>{},handleBack:()=>{},handleJumpTo:()=>{},currentNode:null,loadingScreen:null,handleSetLoadingScreen:()=>{},successScreen:null,handleSetSuccessScreen:()=>{},hasBack:!1,hasNext:!1,flow:null,maxSteps:0,currentStep:0}),he=g.div.withConfig({displayName:"PageActions__ActionWrapper"})(["display:flex;flex-direction:column;width:100%;row-gap:",";padding:"," 0;"],h(1),h(2)),Ze=({submitLabel:e,submitDisabled:t,backLabel:a,backDisabled:o,loading:c,onSubmit:l,onBack:r,forceBack:u,...f})=>{const n=G(),{hasBack:d}=w.useContext(fe);return i.jsxs(he,{...f,children:[l&&i.jsx(N,{disabled:t,type:"primary",onClick:l,loading:c,children:e||n.formatMessage({id:"dynamic_campaign_creation.cta_next"})}),!o&&(d||u)&&r&&i.jsx(N,{type:"link",onClick:r,children:a||n.formatMessage({id:"dynamic_campaign_creation.cta_go_back"})})]})},Je="data:image/svg+xml,%3csvg%20width='1055'%20height='734'%20viewBox='0%200%201055%20734'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_6444_56818)'%3e%3crect%20width='1055'%20height='734'%20rx='12'%20fill='%232C2E40'/%3e%3cg%20opacity='0.29'%20filter='url(%23filter0_f_6444_56818)'%3e%3cellipse%20cx='713.5'%20cy='364'%20rx='426.5'%20ry='200'%20fill='%23FF6BC1'/%3e%3c/g%3e%3cg%20opacity='0.4'%20filter='url(%23filter1_f_6444_56818)'%3e%3cellipse%20cx='1099'%20cy='233'%20rx='483'%20ry='345'%20fill='url(%23paint0_angular_6444_56818)'/%3e%3c/g%3e%3crect%20y='470'%20width='1055'%20height='264'%20fill='url(%23paint1_linear_6444_56818)'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_f_6444_56818'%20x='-337'%20y='-460'%20width='2101'%20height='1648'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='BackgroundImageFix'%20result='shape'/%3e%3cfeGaussianBlur%20stdDeviation='312'%20result='effect1_foregroundBlur_6444_56818'/%3e%3c/filter%3e%3cfilter%20id='filter1_f_6444_56818'%20x='432'%20y='-296'%20width='1334'%20height='1058'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='BackgroundImageFix'%20result='shape'/%3e%3cfeGaussianBlur%20stdDeviation='92'%20result='effect1_foregroundBlur_6444_56818'/%3e%3c/filter%3e%3cradialGradient%20id='paint0_angular_6444_56818'%20cx='0'%20cy='0'%20r='1'%20gradientUnits='userSpaceOnUse'%20gradientTransform='translate(1099%20233)%20rotate(90)%20scale(345%20483)'%3e%3cstop%20offset='0.0544618'%20stop-color='%23FF6BC1'%20stop-opacity='0.1'/%3e%3cstop%20offset='0.522195'%20stop-color='%2357E1FF'%20stop-opacity='0.7'/%3e%3cstop%20offset='0.659424'%20stop-color='%235FB4FF'%20stop-opacity='0.9'/%3e%3cstop%20offset='0.787423'%20stop-color='%2357E1FF'%20stop-opacity='0.3'/%3e%3c/radialGradient%3e%3clinearGradient%20id='paint1_linear_6444_56818'%20x1='527.5'%20y1='470'%20x2='527.5'%20y2='734'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%232B2E40'%20stop-opacity='0'/%3e%3cstop%20offset='1'%20stop-color='%232B2E40'/%3e%3c/linearGradient%3e%3cclipPath%20id='clip0_6444_56818'%3e%3crect%20width='1055'%20height='734'%20rx='12'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Xe=2,_e=50,D=400,O=5120,et=5120,tt=128,ye=1,xe=10,Ie="landscape",we="squarish",be=({onUploadStart:e=()=>{},onUploadComplete:t=()=>{},processFiles:a=()=>Promise.resolve({file:null}),...o})=>{const c=w.useCallback(async s=>{e(s);const p=await a(s);t(p)},[e,a,t]),{getRootProps:l,getInputProps:r,open:u,...f}=K({noClick:!0,multiple:!1,onDrop:c,...o}),n=i.jsx("input",{...r(),"data-testid":"upload-field"}),d=i.jsx("div",{...l(),children:n});return{getRootProps:l,getInputProps:r,open:u,elements:d,input:n,...f}};v.config({duration:10});const b=Q({accessKey:ae}),at=()=>window.Canva&&window.Canva.DesignButton?window.Canva.DesignButton.initialize({apiKey:se}).catch(()=>Promise.reject()):Promise.reject(),R=({query:e,orientation:t,page:a})=>{var o;return b!=null&&b.search?(o=b==null?void 0:b.search)==null?void 0:o.getPhotos({query:e,orientation:t,perPage:xe,page:a}):Promise.reject(new Error("`unsplashApi` is undefined"))},Me=e=>{var t,a;return{id:e.id,thumbnail_url:(t=e.urls)==null?void 0:t.small,public_url:(a=e.urls)==null?void 0:a.regular,name:e.description,links:e.links,user:e.user}},Ce=()=>x.get(I.api.business.media.base),Se=e=>x.get(I.api.business.media.externalMediaInfo(e)),z=e=>x.post(I.api.business.media.uploadExternalMedia,{media_url:e}),q=e=>x.get(I.api.business.media.info(e)),Ee=async e=>{const t=await z(e);return{...await q(t.id)}},Be=e=>{const t=new FormData;return t.append("file",e),x.post(I.api.business.media.uploadFile,t,{headers:{"Content-Type":"multipart/form-data"},toastifyOptions:{resourceName:oe.creative}})},Pe=e=>x.post(I.api.business.media.delete,{mediaId:[e]}),ke=async({query:e,page:t=ye})=>{const a=await R({query:e,orientation:Ie,page:t}),o=await R({query:e,orientation:we,page:t}),l=a.response.results.concat(o.response.results).map(Me),r=t<a.response.total_pages||t<o.response.total_pages;return{data:l,hasNext:r}},ve=e=>x.post(I.api.business.media.banner,e),Fe=(e,t)=>x.patch(I.api.business.media.banner,{media_id:e,...t}),E={getMedia:Ce,getExternalMediaInfo:Se,uploadExternalMedia:z,uploadExternalMediaFile:Ee,uploadMedia:Be,getMediaInfo:q,searchUnsplashImages:ke,removeMedia:Pe,createBanner:ve,editBanner:Fe},Ae=()=>{const e=V(),t=ie(),a=n=>{e.getQueryData(t.MEDIA.LIST())&&e.setQueryData(t.MEDIA.LIST(),s=>({...s,images:[n,...(s==null?void 0:s.images)||[]]}))},o=n=>{e.getQueryData(t.MEDIA.LIST())&&e.setQueryData(t.MEDIA.LIST(),s=>({...s,images:(s==null?void 0:s.images.filter(p=>p.id!==n))||[]}))},c=S({mutationFn:E.getMediaInfo}),l=S({mutationFn:E.removeMedia,onSuccess:(n,d)=>(o(d),n)}),r=S({mutationFn:async n=>{const d=await E.uploadMedia(n);return d.id?await c.mutateAsync(d.id):d},onSuccess:async n=>{const d=n.id;if(d){const s=await c.mutateAsync(d);a(s)}return n}}),u=S({mutationFn:E.createBanner,onSuccess:()=>{e.invalidateQueries({queryKey:t.MEDIA.LIST()})}}),f=S({mutationFn:({mediaId:n,banner:d})=>E.editBanner(n,d),onSuccess:()=>{e.invalidateQueries({queryKey:t.MEDIA.LIST()})}});return{deleteMediaMutation:l,uploadMediaMutation:r,getMediaInfoMutation:c,createBannerMutation:u,editBannerMutation:f}},F=["image/jpeg","image/png"],A=["video/mp4","video/quicktime","video/webm","video/x-msvideo","video/mpeg","video/ogg","video/3gpp"],j="imageUpload",B=e=>e==="requiredField"?"validation.required_field":e==="format"?"validation.file_format":e==="size"?"validation.file_size":e==="resolution"?"validation.file_resolution":e==="ratio"?"validation.file_ratio":e==="duration"?"validation.file_duration":"",De=(e,t,a)=>{const o=L(a,"videoWidth",a.width),c=L(a,"videoHeight",a.height);if(F.includes(t.type)&&t.size/1024>=O)return e.formatMessage({id:B("size")},{size:O});if(A.includes(t.type)){if(t.size/1024**2>=_e)return e.formatMessage({id:B("size")});if(o<D||c<D)return e.formatMessage({id:B("resolution")},{size:D})}return""},je=()=>{const e=$(),{uploadMediaMutation:t}=Ae();return{upload:async a=>F.includes(a.type)?await t.mutateAsync(a):A.includes(a.type)?await e(re(a)):null}},st=({availableMediaTypes:e=["image","video"],onImageUploadStart:t=()=>{},onUploadComplete:a=()=>{},validate:o=De,autoUpload:c=!0})=>{const l=$(),r=G(),{upload:u}=je(),f=w.useCallback(s=>W.error(i.jsx(ne,{children:r.formatMessage({id:B(s)})})),[r]),n=w.useCallback(async s=>new Promise(p=>{const _=new FileReader;let y,k;s?(F.includes(s.type)&&(y=new Image,_.onload=()=>{y.src=_.result,y.onload=async()=>{const C=o(r,s,y);C?p({error:C}):c&&(k=await u(s)),p({media:k,file:s,details:{dataUrl:_.result}})}}),A.includes(s.type)&&(y=document.createElement("video"),_.onload=()=>{y.src=_.result,y.onloadedmetadata=async()=>{const C=o(r,s,y);C?p({error:C}):c&&(k=await u(s)),p({media:k,file:s,details:{dataUrl:_.result}})}}),_.readAsDataURL(s)):p({error:r.formatMessage({id:B("format")})})}),[l]);return{...be({onUploadStart:t,onUploadComplete:s=>{s.error||!s.file?(v.error({content:(s==null?void 0:s.error)||r.formatMessage({id:"common.media_error"}),key:j,duration:2}),a==null||a(null)):(v.success({content:r.formatMessage({id:"common.media_processed"}),key:j,duration:2}),a==null||a(s))},processFiles:async s=>{try{v.loading({content:r.formatMessage({id:"common.processing_media"}),key:j,duration:null});const p=s[0];return await n(p)}catch{return{error:r.formatMessage({id:"common.media_error"})}}},accept:[...e.includes("image")?F:[],...e.includes("video")?A:[]].join(", ")}),showError:f}},Te=g(le).withConfig({displayName:"ColorPicker__Wrapper"})(["max-width:",";padding:",";background-color:",";"],m(300),h(2),e=>e.theme.colors.background.default),Le=g(P).withConfig({displayName:"ColorPicker__SaturationContainer"})(["position:relative;overflow:hidden;height:",";border-radius:",";"],m(235),e=>e.theme.borderRadiusLarge),H=g.div.withConfig({displayName:"ColorPicker__Pointer"})(["width:",";height:",";border:2px solid #fff;border-radius:50%;transform:translate(-50%,-50%);box-shadow:0 0 5px 0 rgb(0 0 0 / 25%);"],m(14),m(14)),Ne=g(P).withConfig({displayName:"ColorPicker__HueContainer"})(["position:relative;overflow:hidden;height:",";border-radius:",";"],m(12),m(6)),Oe=g(H).withConfig({displayName:"ColorPicker__HuePointer"})(["transform:translate(-50%,-",");"],m(1)),Re=g(P).withConfig({displayName:"ColorPicker__InputContainer"})(["gap:",";"],h(2)),Ue=g.div.withConfig({displayName:"ColorPicker__ColorPreview"})(["flex-shrink:0;width:",";height:",";border-radius:",";background-color:",";"],m(48),m(48),m(8),e=>e.$color),U=(e,t)=>{switch(e){case M.EditableInput:return{input:{width:160,padding:`${h(1.5)} ${h(1)}`,border:`1px solid ${t.colors.stroke}`,borderRadius:t.borderRadiusLarge,color:t.colors.text.primary,background:"none",outline:"none"}};default:return{default:{}}}},Ge=e=>{const{color:t,onChange:a}=e,o=ce();return i.jsxs(Te,{children:[i.jsx(P,{$spacing:2,children:i.jsx(T,{type:"body",variant:"xl",children:i.jsx(de,{id:"common.color_picker"})})}),i.jsx(Le,{$spacing:2,children:i.jsx(M.Saturation,{pointer:H,...e})}),i.jsx(Ne,{$spacing:2,children:i.jsx(M.Hue,{styles:U(M.Hue,o),pointer:Oe,...e})}),i.jsxs(Re,{$centered:!0,$contentLeft:!0,children:[i.jsx(T,{type:"body",variant:"m",color:"text.important",children:"Hex"}),i.jsx(M.EditableInput,{style:U(M.EditableInput,o),value:t,onChange:a}),i.jsx(Ue,{$color:t})]})]})},$e=Y(Ge),ze=({color:e,onChange:t,handle:a})=>{const o=w.useCallback(c=>t(c.hex),[t]);return i.jsx(ge,{overlayStyle:{userSelect:"none"},customOverlay:!0,clickArea:a,children:i.jsx($e,{color:e,onChange:o})})},qe=g(P).withConfig({displayName:"BusinessBrandColors__Colors"})(["display:grid;grid-template-columns:1fr 1fr 1fr;gap:",";","{grid-template-columns:1fr;}"],h(2),ue(pe,"max")),He=g.div.withConfig({displayName:"BusinessBrandColors__ColorItem"})(["display:flex;align-items:center;gap:",";padding:"," ",";border:1px solid ",";border-radius:",";cursor:pointer;",""],h(2),h(1.5),h(2),e=>e.theme.colors.stroke,e=>e.theme.borderRadiusLarge,e=>e.$disabled&&Z(["cursor:not-allowed;opacity:0.5;"])),Ke=g.div.withConfig({displayName:"BusinessBrandColors__Color"})(["width:",";height:",";border-radius:",";background-color:",";box-shadow:0 0 2px 0 ",";"],m(32),m(28),e=>e.theme.borderRadiusLarge,e=>e.color,e=>e.theme.colors.charcoal[200]),ot=({fieldName:e,disabled:t})=>{const a=me(e),o=J(),c=w.useCallback(()=>a&&i.jsx(qe,{children:a.map((l,r)=>{const u=X(t)?t(l,r):t,f=i.jsxs(He,{$disabled:u,children:[i.jsx(Ke,{color:l}),i.jsx(T,{type:"body",variant:"m",textTransform:"uppercase",color:u?"text.inactive":"text.primary",children:l})]});return u?f:i.jsx(ze,{color:l,onChange:n=>o.change(`${e}.${r}`,n),handle:f})})}),[o,a,e,t]);return i.jsx(ee,{name:e,render:c})};export{ot as B,fe as D,F as I,et as L,Ze as P,ye as U,A as V,tt as a,Ae as b,Xe as c,Je as d,Ce as e,je as f,B as g,be as h,at as i,E as m,st as u};
//# sourceMappingURL=BusinessBrandColors-CP96BEGK.js.map
